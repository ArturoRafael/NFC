<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<p>
  <button class="btn btn-lg btn-default" onclick="readWriteNfc()">¿¿ NFC ??</button>

  
</p>

<div id="log"></div>
<script src="main.js"></script>
<script id="dynamicScript" type="text/javascript">
	
function readWriteNfc() {
  if ('nfc' in navigator) {
    alert("yes");
  } else {
    alert('NFC API not supported.');
  }
}



function consoleLog(data) {
  var logElement = document.getElementById('log');
  logElement.innerHTML += '<p>' + data + '</p>';
}

function processMessage(message) {
  message.data.forEach(function(record) {
    if (record.recordType == "string") {
      consoleLog('Data is string: ' + record.data);
    } else if (record.recordType == "json") {
      processJSON(record.data);
    } else if (record.recordType == "url") {
      consoleLog("Data is URL: " + record.data);
    } else if (record.recordType == "opaque" && record.mediaType == 'image/png') {
      processPng(record.data);
    };
  });
}

function processPng(data) {
  consoleLog("Known image/png data");

  var img = document.createElement("img");
  img.src = URL.createObjectURL(new Blob(data, 'image/png'));
  img.onload = function() {
    window.URL.revokeObjectURL(this.src);
  };
};

function processJSON(data) {
  var obj = JSON.parse(data);
  consoleLog("JSON data: " + obj.myProperty.toString());
};

</script>

</body>

</html>